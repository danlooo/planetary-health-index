pivot_wider(names_from = index_type, values_from = value) |>
filter(cca_axis == "CCA1") |>
filter(country == "BRA") |>
ggplot(aes(x = Biosphere, y = Atmosphere, z = Socioeconomics, color = during_event, label = year)) +
axes_3D() +
stat_3D(geom = "text") +
stat_3D(geom="path") +
stat_3D(geom="point") +
labs_3D(labs=c("Bio", "Atmo", "Soc")) +
scale_color_manual(c(TRUE = "red", FALSE = "grey")) +
data |>
pivot_wider(names_from = index_type, values_from = value) |>
filter(cca_axis == "CCA1") |>
filter(country == "BRA") |>
ggplot(aes(x = Biosphere, y = Atmosphere, z = Socioeconomics, color = during_event, label = year)) +
axes_3D() +
stat_3D(geom = "text") +
stat_3D(geom="path") +
stat_3D(geom="point") +
labs_3D(labs=c("Bio", "Atmo", "Soc")) +
scale_color_manual(c(TRUE = "red", FALSE = "grey")) +
data |>
pivot_wider(names_from = index_type, values_from = value) |>
filter(cca_axis == "CCA1") |>
filter(country == "BRA") |>
ggplot(aes(x = Biosphere, y = Atmosphere, z = Socioeconomics, color = during_event, label = year)) +
axes_3D() +
stat_3D(geom = "text") +
stat_3D(geom="path") +
stat_3D(geom="point") +
labs_3D(labs=c("Bio", "Atmo", "Soc")) +
scale_color_manual(c(`TRUE` = "red", `FALSE` = "grey")) +
facet_wrap(~country) +
theme_void()
data |>
pivot_wider(names_from = index_type, values_from = value) |>
filter(cca_axis == "CCA1") |>
filter(country == "BRA") |>
ggplot(aes(x = Biosphere, y = Atmosphere, z = Socioeconomics, color = during_event, label = year)) +
axes_3D() +
stat_3D(geom = "text") +
stat_3D(geom="path") +
stat_3D(geom="point") +
labs_3D(labs=c("Bio", "Atmo", "Soc")) +
scale_color_manual(list(`TRUE` = "red", `FALSE` = "grey")) +
facet_wrap(~country) +
theme_void()
data |>
pivot_wider(names_from = index_type, values_from = value) |>
filter(cca_axis == "CCA1") |>
filter(country == "BRA") |>
ggplot(aes(x = Biosphere, y = Atmosphere, z = Socioeconomics, color = during_event, label = year)) +
axes_3D() +
stat_3D(geom = "text") +
stat_3D(geom="path") +
stat_3D(geom="point") +
labs_3D(labs=c("Bio", "Atmo", "Soc")) +
scale_color_manual(values = list(`TRUE` = "red", `FALSE` = "grey")) +
facet_wrap(~country) +
theme_void()
data |>
pivot_wider(names_from = index_type, values_from = value) |>
filter(cca_axis == "CCA1") |>
filter(country == "BRA") |>
ggplot(aes(x = Biosphere, y = Atmosphere, z = Socioeconomics, color = during_event, label = year)) +
axes_3D() +
stat_3D(geom = "text") +
stat_3D(geom="path") +
stat_3D(geom="point") +
labs_3D(labs=c("Bio", "Atmo", "Soc")) +
scale_color_manual(values = c(`TRUE` = "red", `FALSE` = "grey")) +
facet_wrap(~country) +
theme_void()
data |>
pivot_wider(names_from = index_type, values_from = value) |>
filter(cca_axis == "CCA1") |>
filter(country == "BRA") |>
ggplot(aes(x = Biosphere, y = Atmosphere, z = Socioeconomics, color = during_event, label = year)) +
axes_3D() +
stat_3D(geom="path") +
stat_3D(geom="point") +
labs_3D(labs=c("Bio", "Atmo", "Soc")) +
scale_color_manual(values = c(`TRUE` = "red", `FALSE` = "grey")) +
facet_wrap(~country) +
theme_void()
data |>
pivot_wider(names_from = index_type, values_from = value) |>
filter(cca_axis == "CCA1") |>
filter(country == "BRA") |>
ggplot(aes(x = Biosphere, y = Atmosphere, z = Socioeconomics, color = during_event, label = year)) +
axes_3D() +
stat_3D(geom="path") +
stat_3D(geom="point") +
stat_3D(geom="text", color = "black") +
labs_3D(labs=c("Bio", "Atmo", "Soc")) +
scale_color_manual(values = c(`TRUE` = "red", `FALSE` = "grey")) +
facet_wrap(~country) +
theme_void()
data |>
pivot_wider(names_from = index_type, values_from = value)
data |>
pivot_wider(names_from = index_type, values_from = value) |>
mutate(year = year |> map_int(~ ifelse(.x %% 5 == 0, .x, NA)))
data |>
pivot_wider(names_from = index_type, values_from = value) |>
mutate(year = year |> map_int(~ ifelse(.x %% 5 == 0, .x, NA))) |>
filter(cca_axis == "CCA1") |>
filter(country == "BRA") |>
ggplot(aes(x = Biosphere, y = Atmosphere, z = Socioeconomics, color = during_event, label = year)) +
axes_3D() +
stat_3D(geom="path") +
stat_3D(geom="point") +
stat_3D(geom="text", color = "black") +
labs_3D(labs=c("Bio", "Atmo", "Soc")) +
scale_color_manual(values = c(`TRUE` = "red", `FALSE` = "grey")) +
facet_wrap(~country) +
theme_void()
data |>
pivot_wider(names_from = index_type, values_from = value) |>
mutate(year = year |> map_int(~ ifelse(.x %% 5 == 0, .x, NA))) |> # display only every 5th year
filter(cca_axis == "CCA1") |>
filter(country == "BRA") |>
ggplot(aes(x = Biosphere, y = Atmosphere, z = Socioeconomics, color = during_event, label = year)) +
axes_3D() +
stat_3D(geom="path") +
stat_3D(geom="point") +
stat_3D(geom="text", color = "black", size = 3) +
labs_3D(labs=c("Bio", "Atmo", "Soc")) +
scale_color_manual(values = c(`TRUE` = "red", `FALSE` = "grey")) +
facet_wrap(~country) +
theme_void()
?stat_3D
data <-
list.files("data", full.names = TRUE) |>
map(read_csv) |>
bind_rows() |>
pivot_longer(starts_with("CC")) |>
mutate(
index_type = name |> str_extract("[XYZ]") |> recode("X" = "Biosphere", "Y" = "Atmosphere", Z = "Socioeconomics"),
cca_axis = name |> str_extract("[0-9]") |> map_chr(~ str_glue("CCA{.x}"))
) |>
select(-name) |>
rename(country = `Country Code`) |>
left_join(events) |>
mutate(during_event = ! is.na(event))
data |>
pivot_wider(names_from = index_type, values_from = value) |>
mutate(year = year |> map_int(~ ifelse(.x %% 5 == 0, .x, NA))) |> # display only every 5th year
filter(cca_axis == "CCA1") |>
filter(country == "BRA") |>
ggplot(aes(x = Biosphere, y = Atmosphere, z = Socioeconomics, color = during_event, label = year)) +
axes_3D() +
stat_3D(geom="path") +
stat_3D(geom="point") +
stat_3D(geom="text", color = "black", size = 3) +
labs_3D(labs=c("Bio", "Atmo", "Soc")) +
scale_color_manual(values = c(`TRUE` = "red", `FALSE` = "grey")) +
facet_wrap(~country) +
theme_void()
data |>
pivot_wider(names_from = index_type, values_from = value) |>
mutate(year = year |> map_int(~ ifelse(.x %% 5 == 0, .x, NA))) |> # display only every 5th year
filter(cca_axis == "CCA1") |>
filter(country == "BRA") |>
ggplot(aes(x = Biosphere, y = Atmosphere, z = Socioeconomics, color = during_event, label = year)) +
axes_3D() +
stat_3D(geom="path") +
stat_3D(geom="point") +
stat_3D(geom="text", color = "black", size = 3) +
labs_3D(labs=c("Bio", "Atmo", "Soc")) +
scale_color_manual(values = c(`TRUE` = "red", `FALSE` = "grey")) +
facet_wrap(~country) +
theme_void()
data
data |>
pivot_wider(names_from = index_type, values_from = value) |>
mutate(year = year |> map_int(~ ifelse(.x %% 5 == 0, .x, NA))) |> # display only every 5th year
filter(cca_axis == "CCA1") |>
filter(country == "BRA") |>
ggplot(aes(x = Biosphere, y = Atmosphere, z = Socioeconomics, color = during_event, label = year)) +
axes_3D() +
stat_3D(geom="path") +
stat_3D(geom="point") +
stat_3D(geom="text", color = "black", size = 3) +
labs_3D(labs=c("Bio", "Atmo", "Soc")) +
scale_color_manual(values = c(`TRUE` = "red", `FALSE` = "grey")) +
facet_wrap(~country) +
theme_void()
data
data |>
pivot_wider(names_from = index_type, values_from = value)
data |>
pivot_wider(names_from = cca_axis, values_from = value) |>
filter(country == "BRA")
data |>
pivot_wider(names_from = cca_axis, values_from = value) |>
filter(country == "BRA") |>
ggplot(aes(CCA1, CCA2)) +
geom_path()
data |>
pivot_wider(names_from = cca_axis, values_from = value) |>
filter(country == "BRA") |>
ggplot(aes(CCA1, CCA2, color = index_type)) +
geom_path()
data |>
pivot_wider(names_from = cca_axis, values_from = value) |>
filter(country == "BRA") |>
ggplot(aes(CCA1, CCA2, color = )) +
geom_path() +
facet_wrap(~index_type)
data |>
pivot_wider(names_from = cca_axis, values_from = value) |>
filter(country == "BRA") |>
ggplot(aes(CCA1, CCA2, color = )) +
geom_path() +
facet_wrap(~index_type) +
labs(title = "Brazil 2012")
data |>
pivot_wider(names_from = cca_axis, values_from = value) |>
filter(country == "BRA") |>
ggplot(aes(CCA1, CCA2, color = )) +
geom_path(arrow = arrow()) +
facet_wrap(~index_type) +
labs(title = "Brazil 2012")
data |>
pivot_wider(names_from = cca_axis, values_from = value) |>
filter(country == "BRA") |>
ggplot(aes(CCA1, CCA2, color = )) +
geom_path(arrow = arrow(length = 3)) +
facet_wrap(~index_type) +
labs(title = "Brazil 2012")
?arrow
data |>
pivot_wider(names_from = cca_axis, values_from = value) |>
filter(country == "BRA") |>
ggplot(aes(CCA1, CCA2, color = )) +
geom_path(arrow = arrow(length = unit(3, "mm"))) +
facet_wrap(~index_type) +
labs(title = "Brazil 2012")
data |>
pivot_wider(names_from = cca_axis, values_from = value) |>
filter(country == "BRA") |>
ggplot(aes(CCA1, CCA2, color = )) +
geom_line(arrow = arrow(length = unit(3, "mm"))) +
facet_wrap(~index_type) +
labs(title = "Brazil 2012")
data |>
pivot_wider(names_from = cca_axis, values_from = value) |>
filter(country == "BRA") |>
ggplot(aes(CCA1, CCA2, color = )) +
geom_patharrow = arrow(length = unit(3, "mm"))) +
data <-
list.files("data", full.names = TRUE) |>
map(read_csv) |>
bind_rows() |>
pivot_longer(starts_with("CC")) |>
mutate(
index_type = name |> str_extract("[XYZ]") |> recode("X" = "Biosphere", "Y" = "Atmosphere", Z = "Socioeconomics"),
cca_axis = name |> str_extract("[0-9]") |> map_chr(~ str_glue("CCA{.x}"))
) |>
select(-name) |>
rename(country = `Country Code`) |>
left_join(events) |>
mutate(during_event = ! is.na(event)) |>
arrange(country, year)
data |>
pivot_wider(names_from = index_type, values_from = value) |>
mutate(year = year |> map_int(~ ifelse(.x %% 5 == 0, .x, NA))) |> # display only every 5th year
filter(cca_axis == "CCA1") |>
filter(country == "BRA") |>
ggplot(aes(x = Biosphere, y = Atmosphere, z = Socioeconomics, color = during_event, label = year)) +
axes_3D() +
stat_3D(geom="path") +
stat_3D(geom="point") +
stat_3D(geom="text", color = "black", size = 3) +
labs_3D(labs=c("Bio", "Atmo", "Soc")) +
scale_color_manual(values = c(`TRUE` = "red", `FALSE` = "grey")) +
facet_wrap(~country) +
theme_void()
events <- tribble(
~from, ~to, ~event,
2003, 2012, "one of the fastest-growing major economies in the world",
2012, 2012, "Forest conservation code",
2014, 2014, "Brazilian economic crisis",
2015, 2016, "Warmest EI Nino-induced severe drought",
2018, 2024, "increased deforestation alerts",
2020, 2021, "COVID-19"
) |>
mutate(country = "BRA") |>
mutate(year = map2(from, to, ~ seq(.x, .y))) |>
unnest_longer(year) |>
select(-from, -to)
data <-
list.files("data", full.names = TRUE) |>
map(read_csv) |>
bind_rows() |>
pivot_longer(starts_with("CC")) |>
mutate(
index_type = name |> str_extract("[XYZ]") |> recode("X" = "Biosphere", "Y" = "Atmosphere", Z = "Socioeconomics"),
cca_axis = name |> str_extract("[0-9]") |> map_chr(~ str_glue("CCA{.x}"))
) |>
select(-name) |>
rename(country = `Country Code`) |>
left_join(events) |>
mutate(during_event = ! is.na(event)) |>
arrange(country, year)
data |>
pivot_wider(names_from = index_type, values_from = value) |>
mutate(year = year |> map_int(~ ifelse(.x %% 5 == 0, .x, NA))) |> # display only every 5th year
filter(cca_axis == "CCA1") |>
filter(country == "BRA") |>
ggplot(aes(x = Biosphere, y = Atmosphere, z = Socioeconomics, color = during_event, label = year)) +
axes_3D() +
stat_3D(geom="path") +
stat_3D(geom="point") +
stat_3D(geom="text", color = "black", size = 3) +
labs_3D(labs=c("Bio", "Atmo", "Soc")) +
scale_color_manual(values = c(`TRUE` = "red", `FALSE` = "grey")) +
facet_wrap(~country) +
theme_void()
data |>
pivot_wider(names_from = cca_axis, values_from = value) |>
filter(country == "BRA") |>
ggplot(aes(CCA1, CCA2, color = )) +
geom_path(arrow = arrow(length = unit(3, "mm"))) +
facet_wrap(~index_type) +
labs(title = "Brazil 2012")
data <-
list.files("data", full.names = TRUE) |>
map(read_csv) |>
bind_rows() |>
pivot_longer(starts_with("CC")) |>
mutate(
index_type = name |> str_extract("[XYZ]") |> recode("X" = "Biosphere", "Y" = "Atmosphere", Z = "Socioeconomics"),
cca_axis = name |> str_extract("[0-9]") |> map_chr(~ str_glue("CCA{.x}"))
) |>
select(-name) |>
rename(country = `Country Code`) |>
left_join(events) |>
mutate(during_event = ! is.na(event)) |>
arrange(country, year)
data |>
pivot_wider(names_from = index_type, values_from = value) |>
mutate(year = year |> map_int(~ ifelse(.x %% 5 == 0, .x, NA))) |> # display only every 5th year
filter(cca_axis == "CCA1") |>
filter(country == "BRA") |>
ggplot(aes(x = Biosphere, y = Atmosphere, z = Socioeconomics, color = during_event, label = year)) +
axes_3D() +
stat_3D(geom="path") +
stat_3D(geom="point") +
stat_3D(geom="text", color = "black", size = 3) +
labs_3D(labs=c("Bio", "Atmo", "Soc")) +
scale_color_manual(values = c(`TRUE` = "red", `FALSE` = "grey")) +
facet_wrap(~country) +
theme_void()
data |>
pivot_wider(names_from = cca_axis, values_from = value) |>
filter(country == "BRA") |>
ggplot(aes(CCA1, CCA2, color = )) +
geom_path(arrow = arrow(length = unit(3, "mm"))) +
facet_wrap(~index_type) +
labs(title = "Brazil 2012")
data |>
pivot_wider(names_from = cca_axis, values_from = value) |>
filter(country == "BRA") |>
ggplot(aes(CCA1, CCA2, color = )) +
geom_path(arrow = arrow(length = unit(3, "mm"))) +
facet_wrap(~index_type) +
theme_minimal() +
labs(title = "Brazil 2012")
data2 <-
data |>
pivot_wider(names_from = cca_axis, values_from = value) |>
filter(country == "BRA")
data |>
ggplot(aes(CCA1, CCA2, color = )) +
geom_path(arrow = arrow(length = unit(3, "mm"))) +
facet_wrap(~index_type) +
theme_minimal() +
labs(title = "Brazil 2012")
data2 |>
ggplot(aes(CCA1, CCA2, color = )) +
geom_path(arrow = arrow(length = unit(3, "mm"))) +
facet_wrap(~index_type) +
theme_minimal() +
labs(title = "Brazil 2012")
data2
data2 <-
data |>
pivot_wider(names_from = cca_axis, values_from = value) |>
filter(country == "BRA")
data2 |>
ggplot(aes(CCA1, CCA2, color = )) +
geom_path(arrow = arrow(length = unit(3, "mm"))) +
geom_point(data = ~ filter(.x, year == 2012))
data2 |>
ggplot(aes(CCA1, CCA2, color = )) +
geom_path(arrow = arrow(length = unit(3, "mm"))) +
geom_point(data = ~ filter(.x, year == 2012)) +
facet_wrap(~index_type) +
theme_minimal() +
labs(title = "Brazil 2012")
data2 <-
data |>
pivot_wider(names_from = cca_axis, values_from = value) |>
filter(country == "BRA")
data2 |>
ggplot(aes(CCA1, CCA2)) +
geom_path(arrow = arrow(length = unit(3, "mm"))) +
geom_point(data = ~ filter(.x, year == 2012)) +
facet_wrap(~index_type) +
theme_minimal() +
labs(title = "Brazil 2012")
data2 |>
ggplot(aes(CCA1, CCA2)) +
geom_path(arrow = arrow(length = unit(3, "mm"))) +
geom_point(data = ~ filter(.x, year == 2012), color = "darkred") +
facet_wrap(~index_type) +
theme_minimal() +
labs(title = "Brazil 2012")
data2 |>
ggplot(aes(CCA1, CCA2)) +
geom_path(arrow = arrow(length = unit(3, "mm"))) +
geom_point(data = ~ filter(.x, year == 2012), color = "darkred", size = 3) +
facet_wrap(~index_type) +
theme_minimal() +
labs(title = "Brazil 2012")
data2
year = 2012
current_year = 2012
current_year <- 2012
data2 |>
ggplot(aes(CCA1, CCA2)) +
geom_path(arrow = arrow(length = unit(3, "mm"))) +
geom_point(data = ~ filter(.x, year == current_year), color = "darkred", size = 3) +
facet_wrap(~index_type) +
theme_minimal() +
labs(title = "Brazil {current_year}")
data2 |>
ggplot(aes(CCA1, CCA2)) +
geom_path(arrow = arrow(length = unit(3, "mm"))) +
geom_point(data = ~ filter(.x, year == current_year), color = "darkred", size = 3) +
facet_wrap(~index_type) +
theme_minimal() +
labs(title = str_glue("Brazil {current_year}"))
data2
data2 |> filter(year == current_year) |> pull(event) |> unique()
data2 |> filter(year == current_year) |> pull(event) |> unique() |> paste(collapse = "\n")
data2 |>
ggplot(aes(CCA1, CCA2)) +
geom_path(arrow = arrow(length = unit(3, "mm"))) +
geom_point(data = ~ filter(.x, year == current_year), color = "darkred", size = 3) +
facet_wrap(~index_type) +
theme_minimal() +
labs(
title = str_glue("Brazil {current_year}"),
subtitle = data2 |> filter(year == current_year) |> pull(event) |> unique() |> paste(collapse = "\n")
)
data2 |>
ggplot(aes(CCA1, CCA2)) +
geom_point() +
geom_path(arrow = arrow(length = unit(3, "mm"))) +
geom_point(data = ~ filter(.x, year == current_year), color = "darkred", size = 3) +
facet_wrap(~index_type) +
theme_minimal() +
labs(
title = str_glue("Brazil {current_year}"),
subtitle = data2 |> filter(year == current_year) |> pull(event) |> unique() |> paste(collapse = "\n")
)
data2 |>
ggplot(aes(CCA1, CCA2)) +
geom_path(arrow = arrow(length = unit(3, "mm"))) +
geom_point(data = ~ filter(.x, year == current_year), color = "darkred", size = 3) +
facet_wrap(~index_type) +
theme_minimal() +
labs(
title = str_glue("Brazil {current_year}"),
subtitle = data2 |> filter(year == current_year) |> pull(event) |> unique() |> paste(collapse = "\n")
)
library(gganimate)
data2 |>
ggplot(aes(CCA1, CCA2)) +
geom_path(arrow = arrow(length = unit(3, "mm"))) +
geom_point(data = ~ filter(.x, year == current_year), color = "darkred", size = 3) +
facet_wrap(~index_type) +
theme_minimal() +
labs(
title = str_glue("Brazil {current_year}"),
subtitle = data2 |> filter(year == current_year) |> pull(event) |> unique() |> paste(collapse = "\n")
)
current_year <- 2010
data2 |>
ggplot(aes(CCA1, CCA2)) +
geom_path(arrow = arrow(length = unit(3, "mm"))) +
geom_point(data = ~ filter(.x, year == current_year), color = "darkred", size = 3) +
transition_time(year) +
facet_wrap(~index_type) +
theme_minimal() +
labs(
title = str_glue("Brazil {current_year}"),
subtitle = data2 |> filter(year == current_year) |> pull(event) |> unique() |> paste(collapse = "\n")
)
data2 |>
ggplot(aes(CCA1, CCA2)) +
geom_path(arrow = arrow(length = unit(3, "mm"))) +
geom_point(data = ~ filter(.x, year == current_year), color = "darkred", size = 3) +
facet_wrap(~index_type) +
theme_minimal() +
labs(
title = str_glue("Brazil {current_year}"),
subtitle = data2 |> filter(year == current_year) |> pull(event) |> unique() |> paste(collapse = "\n")
)
